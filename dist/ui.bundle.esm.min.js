function F(n,e=window.document){e.readyState==="interactive"||e.readyState==="complete"?n():e.addEventListener("DOMContentLoaded",n)}function C(n){return n.replace(/[&<"']/g,function(e){return{"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})}function B(n,e){n.disabled=!0,n.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+C(e)}function N(n,e){n.disabled=!1,n.innerText=e}function I(n,e){n.disabled=!1,n.innerHTML=e}function j(n){n.scrollTop=0}function U(n){n.scrollTop=n.scrollHeight}function H(...n){for(let e=0;e<n.length;e++)n[e].classList.add("d-none")}function q(...n){for(let e=0;e<n.length;e++)n[e].classList.remove("d-none")}function G(n,e=null,t=window.document){if(n.getElementsByClassName("spinner-border")[0])return;let r=t.createElement("span");e?r.className=e:r.className="spinner-border spinner-border-sm",n.prepend(r)}function V(n){let e=n.querySelector(".spinner-border");e&&e.remove()}function X(n=window){return!!(n.matchMedia&&n.matchMedia("(prefers-color-scheme: dark)").matches)}function K(){let n=navigator.language.match(/^[a-z]+/);return n?n[0]:"en"}function W(n,e=2,t,r){t=t||"en",r=r||{en:["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]};let s=r[t]?r[t]:r.en;if(n===0)return"0 "+s[0];let o=n<0?"-":"";n=Math.abs(n);let i=1024,l=e<0?0:e,c=Math.floor(Math.log(n)/Math.log(i));return o+parseFloat((n/Math.pow(i,c)).toFixed(l))+" "+s[c]}function Y(n){return navigator.clipboard.writeText(n)}function Z(n,e=400,t=window){n.style.opacity="0",n.style.display="block";let r=+new Date,s=()=>{let o=+new Date;n.style.opacity=String(+n.style.opacity+(o-r)/e),r=+new Date,+n.style.opacity<1&&(t.requestAnimationFrame&&t.requestAnimationFrame(s)||setTimeout(s,16))};s()}function J(n,e=400,t=window){n.style.opacity="1";let r=+new Date,s=()=>{let o=+new Date;n.style.opacity=String(+n.style.opacity-(o-r)/e),r=+new Date,+n.style.opacity>0&&(t.requestAnimationFrame&&t.requestAnimationFrame(s)||setTimeout(s,16))};s()}function Q(n){return new Promise(e=>setTimeout(e,n))}function z(n,e){return new Promise((t,r)=>{let s=Date.now(),o=!1,i=!1,l,c,h=setTimeout(()=>{i=!0,o&&(c?r(c):t(l))},e);n.then(a=>{l=a,o=!0,Date.now()-s>=e&&i&&t(a)}).catch(a=>{c=a,o=!0,Date.now()-s>=e&&i&&r(a)})})}function ee(n,e,t,r){e.addEventListener(n,function(s){let o;s.target&&s.target instanceof Element&&(o=s.target,s.target.matches(t)?r(s,o):s.target.closest(t)&&(o=s.target.closest(t),r(s,o)))})}function _(n,...e){let t=[],r=Array.isArray(n)?n:[n];for(let o=0;o<e.length;o++)t.push(r[o]+C((e[o]||"").toString()));t.push(r[r.length-1]);let s=document.createElement("template");return s.innerHTML=t.join(""),s.content}function ne(n){var e=new Date(n*1e3);return`${e.toLocaleDateString("en-GB")} ${e.toLocaleTimeString("en-GB")}`}function re(n){var e=new Date(n*1e3);return`${e.toLocaleDateString("en-GB")}`}function se(n=new Date){return Math.floor(n.getTime()/1e3)}function M(n,e,t=2,r="..."){if(e<=1)return["1"];let s=[n];for(let f=1;f<=t;f++)s.unshift(n-f),s.push(n+f);let o=s.filter(f=>f>1&&f<e).map(f=>f.toString()),i=n>3+t,l=n===3+t,c=n<e-(2+t),h=n===e-(2+t);l&&o.unshift("2"),h&&o.push((e-1).toString()),i&&o.unshift(r),c&&o.push(r);let a=e.toString();return["1",...o,a]}function ie(n,e,t,r){let s=document.createElement("ul");return s.classList.add("pagination"),M(n,e).forEach(i=>{let l=document.createElement("li");if(l.classList.add("page-item"),i=="..."){l.classList.add("disabled");let h=document.createElement("span");h.classList.add("page-link"),h.textContent=i,l.appendChild(h),s.appendChild(l);return}let c=document.createElement("a");c.classList.add("page-link"),i==n.toString()&&l.classList.add("active"),t?c.href=t(Number(i)):c.href="#",c.textContent=i,c.setAttribute("data-page-value",i),l.appendChild(c),s.appendChild(l),r&&c.addEventListener("click",h=>{h.preventDefault();let a=h.target;if(!a)return!1;let f=a.getAttribute("data-page-value");return f?r(Number(f)):!1})}),s}var y=class{items=new Map;#e="";addItem(e,t,r){if(this.items.has(e))throw new Error("Item already exists");this.items.set(e,{isActive:!1,on:t,off:r})}removeItem(e){this.#e===e&&(this.#e=""),this.items.delete(e)}setActive(e){if(!this.items.has(e))throw new Error("Item not found");if(this.#e!==e)for(let[t,r]of this.items)t===e?(this.#e=t,r.isActive||(r.isActive=!0,r.on(t))):(r.isActive&&r.off(t),r.isActive=!1)}runCallbacks(){for(let[e,t]of this.items)t.isActive?t.on(e):t.off(e)}init(e){this.setActive(e),this.runCallbacks()}};function A(n=window.document){if(!n)throw new Error("Document is null. Cannot inject core styles.");let e=`
.d-none {
    display: none !important;
}

html-fragment {
    display: contents;
}
`,t=new CSSStyleSheet;t.replaceSync(e),n.adoptedStyleSheets=[...n.adoptedStyleSheets,t]}var $="data-scope",L="unnamed-scope",D="data-ref",m=class{ref_attr_name;scope_ref_attr_name;window;isScopeElement;includeRoot;scope_auto_name_prefix;constructor(){this.ref_attr_name=D,this.scope_ref_attr_name=$,this.window=globalThis.window,this.isScopeElement=null,this.includeRoot=!1,this.scope_auto_name_prefix=L}toString(){return`ScopeConfig(ref_attr_name=${this.ref_attr_name}, scope_ref_attr_name=${this.scope_ref_attr_name}, includeRoot=${this.includeRoot}, scope_auto_name_prefix=${this.scope_auto_name_prefix}, window=${this.window?"defined":"undefined"}, isScopeElement=${this.isScopeElement})`}},u=new m;function v(n,e){var t=null;e||(e=u);let r=e.scope_ref_attr_name||$,s=e.isScopeElement;return s?t=s(n,e):t=n.getAttribute(r),t===null?null:t}function T(n={}){let e=new m;return e.includeRoot=n.hasOwnProperty("includeRoot")&&typeof n.includeRoot<"u"?n.includeRoot:u.includeRoot,e.scope_auto_name_prefix=n.hasOwnProperty("scope_auto_name_prefix")&&typeof n.scope_auto_name_prefix=="string"?n.scope_auto_name_prefix:u.scope_auto_name_prefix,e.isScopeElement=n.hasOwnProperty("isScopeElement")&&typeof n.isScopeElement<"u"?n.isScopeElement:u.isScopeElement,e.ref_attr_name=n.hasOwnProperty("ref_attr_name")&&typeof n.ref_attr_name=="string"?n.ref_attr_name:u.ref_attr_name,e.window=n.hasOwnProperty("window")&&typeof n.window<"u"?n.window:u.window,e.scope_ref_attr_name=n.hasOwnProperty("scope_ref_attr_name")&&typeof n.scope_ref_attr_name=="string"?n.scope_ref_attr_name:u.scope_ref_attr_name,e}function R(n,e,t={}){var r={},s={},o=[];let i=T(t);function l(a){var f=a.getAttribute(i.ref_attr_name);if(f!=null&&f!=""&&(r[f]?globalThis.window?console.warn(`Element has reference #${f} which is already used
`,`
element: `,a,`
reference #${f}: `,r[f],`
scope root: `,n):console.warn(`Element has reference #${f} which is already used
`):r[f]=a),a!=n){var p=v(a,i);if(typeof p!="string")return;p!=""?s[p]?(console.warn(`scope #${p} is already used`,globalThis.window?a:""),o.push(a)):s[p]=a:o.push(a)}e&&e(a)}i.includeRoot===!0&&n instanceof i.window.HTMLElement&&(r.root=n,e&&e(n)),O(n,l,i);var c=0;let h=i.scope_auto_name_prefix;return o.forEach(a=>{for(;s[h+c.toString()];)c++;s[h+c.toString()]=a}),{refs:r,scope_refs:s}}function O(n,e,t){let r=T(t);function s(l){var c=l,h=c.parentElement;return h&&h!=n&&v(h,r)!==null?2:1}let o=r.window.document.createTreeWalker(n,1,s);var i;for(r.includeRoot===!0&&n instanceof r.window.HTMLElement&&e(n);i=o.nextNode();)e(i)}function b(n,e){for(let t in e){let r=n[t];if(!r)throw new Error(`Missing data-ref: ${t}`);let s=typeof e[t]=="function"?e[t].prototype:e[t];if(s.isPrototypeOf(r)===!1)throw new Error(`The data-ref "${t}" must be an instance of ${s.constructor.name} (actual: ${r.constructor.name})`)}}var w=class{name;components=new Set;#e;constructor(e,t){this.name=e,this.#e=t}attach(e){e.$internals.parentComponent=this.#e,e.$internals.assignedSlotName=this.name,this.components.add(e)}detach(e){e.$internals.parentComponent=null,e.$internals.assignedSlotName="",this.components.delete(e)}detachAll(){this.components.forEach(e=>{e.$internals.parentComponent=null,e.$internals.assignedSlotName=""}),this.components.clear()}mount(){if(!this.#e.isConnected){console.warn(`Cannot mount Slot "${this.name}" in disconnected component ${this.#e.constructor.name}`);return}let e=this.#e.$internals.slotRefs[this.name];if(!e){console.warn(`Cannot get root element for Slot "${this.name}" does not exist in component "${this.#e.constructor.name}"`);return}this.components.forEach(t=>{!t.isConnected&&!t.isCollapsed&&t.mount(e,"append")})}unmount(){this.components.forEach(e=>{e.unmount()})}clear(){this.unmount(),this.detachAll()}};var g=class{slots=new Map;#e;constructor(e){this.#e=e}registerSlot(e){let t=this.getSlot(e);if(t!=null)return t;{let r=new w(e,this.#e);return this.slots.set(e,r),r}}getSlot(e){return this.slots.get(e)||null}hasSlot(e){return this.slots.has(e)}removeSlot(e){this.hasSlot(e)&&(this.clearSlotContent(e),this.slots.delete(e))}hasSlotContent(e){let t=this.getSlot(e);return t==null?!1:t.components.size>0}clearSlotContent(e){let t=this.getSlot(e);return t==null?!1:(t.clear(),!0)}get slotNames(){return Array.from(this.slots.keys())}mountAllSlots(){this.#e.isConnected&&this.slots.forEach(e=>{e.mount()})}mountSlot(e){let t=this.getSlot(e);if(!t){console.warn(`Slot "${e}" does not exist in component "${this.#e.constructor.name}"`);return}t.mount()}unmountAll(){for(let[e,t]of this.slots)t.unmount()}unmountSlot(e){let t=this.getSlot(e);t?.unmount()}attachToSlot(e,...t){let r=this.registerSlot(e);for(let s=0;s<t.length;s++){let o=t[s];this.findSlotByComponent(o)==null&&r.attach(o)}return r}removeComponent(e){let t=this.findSlotByComponent(e);return t?(t.detach(e),e.unmount(),!0):!1}findSlotByComponent(e){return e.$internals.parentComponent!=this.#e?null:this.getSlot(e.$internals.assignedSlotName)}};var d=class{events={};#e={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]};#t=!1;logErrors=!0;get isDestroyed(){return this.#t}on(e,t){if(this.#t)throw new Error("EventEmitter is destroyed");typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let r=this,s=function(){r.removeListener(e,t)};return this.events[e].length==1&&this.#n("#has-listeners",e),s}#r(e,t){this.#e[e].push(t);let r=this;return function(){r.#s(e,t)}}#s(e,t){var r;typeof this.#e[e]=="object"&&(r=this.#e[e].indexOf(t),r>-1&&this.#e[e].splice(r,1))}off(e,t){return this.removeListener(e,t)}removeListener(e,t){if(!this.#t){var r;this.events[e]&&(r=this.events[e].indexOf(t),r>-1&&(this.events[e].splice(r,1),this.events[e].length==0&&this.#n("#no-listeners",e)))}}emit(e,...t){if(!this.#t&&typeof this.events[e]=="object")for(var r=this.events[e],s=r.length,o=0;o<s;o++)try{r[o].apply(this,t)}catch(i){this.#n("#listener-error",i,e,...t),this.logErrors&&console.error(`Error in listener for event "${e}":`,i)}}#n(e,...t){for(var r=this.#e[e],s=r.length,o=0;o<s;o++)try{r[o].apply(this,t)}catch(i){let l=i;if(l.cause={event:e,args:t},e==="#listener-error"){this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l);continue}e==="#has-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l),this.#n("#listener-error",l,"#has-listeners",...t)),e==="#no-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l),this.#n("#listener-error",l,"#no-listeners",...t))}}once(e,t){return this.on(e,function r(){this.removeListener(e,r),t.apply(this,arguments)})}waitForEvent(e,t=0){if(this.#t)throw new Error("EventEmitter is destroyed");return new Promise(r=>{let s,o=this.on(e,()=>{t>0&&clearTimeout(s),o(),r(!0)});t>0&&(s=setTimeout(()=>{o(),r(!1)},t))})}waitForAnyEvent(e,t=0){if(this.#t)throw new Error("EventEmitter is destroyed");return new Promise(r=>{let s,o=[],i=()=>{t>0&&clearTimeout(s),o.forEach(l=>{l()}),r(!0)};e.forEach(l=>{o.push(this.on(l,i))}),t>0&&(s=setTimeout(()=>{i(),r(!1)},t))})}clear(){this.events={}}destroy(){this.#t||(this.#t=!0,this.#e={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]},this.events={})}clearEventListeners(e){if(this.#t)return;(this.events[e]||[]).length>0&&(this.events[e]=[],this.#n("#no-listeners",e))}onHasEventListeners(e){if(this.#t)throw new Error("EventEmitter is destroyed");return this.#r("#has-listeners",e)}onNoEventListeners(e){if(this.#t)throw new Error("EventEmitter is destroyed");return this.#r("#no-listeners",e)}onListenerError(e){if(this.#t)throw new Error("EventEmitter is destroyed");return this.#r("#listener-error",e)}};var E=class{constructor(){this.eventEmitter=new d,this.disconnectController=new AbortController,this.root=null,this.textUpdateFunction=null,this.textResources={},this.refs={},this.slotRefs={},this.parentComponent=null,this.assignedSlotName="",this.mountMode="replace",this.cloneTemplateOnRender=!0,this.parentElement=null,this.elementsToRemove=new Set}};function P(n){n.reloadText();try{n.connectedCallback()}catch(e){console.error("Error in connectedCallback:",e)}}function k(n){try{n.disconnectedCallback()}catch(e){console.error("Error in disconnectedCallback:",e)}}var S=class{$internals=new E;layout=null;refsAnnotation;#e=!1;slotManager=new g(this);#t=!1;constructor(){this.onConnect(P),this.onDisconnect(k)}get isConnected(){return this.#e}get isCollapsed(){return this.#t}reloadText(){this.$internals.textUpdateFunction&&this.$internals.textUpdateFunction(this)}setTextUpdateFunction(e){this.$internals.textUpdateFunction=e}#r(){if(!this.layout)return null;let e;if(typeof this.layout=="function"){let r=this.layout(this);if(r instanceof Node)e=r;else if(typeof r=="string")e=_(r);else throw new Error(`Invalid layout function return type: must be a Node or a string. Got ${typeof r}.`)}else if(typeof this.layout=="string")e=_(this.layout.trim());else throw new Error(`Invalid layout type: must be a function or a string. Got ${typeof this.layout}.`);if(e.nodeType===Node.ELEMENT_NODE)return e;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.firstChild&&e.firstChild.nodeType===Node.ELEMENT_NODE)return e.firstChild;let t=document.createElement("html-fragment");return t.appendChild(e),e=t,e}setLayout(e,t){this.layout=e,t&&(this.refsAnnotation=t)}setRenderer(e,t){this.setLayout(e,t)}getRefs(){if(!this.#e)throw new Error("Component is not connected to the DOM");return this.$internals.refs}getRef(e){let t=this.getRefs();if(!(e in t))throw new Error(`Ref "${e}" does not exist`);return t[e]}hasRef(e){let t=this.getRefs();return e in t}updateRefs(){if(!this.$internals.root)throw new Error("Component is not connected to the DOM");let e=this.$internals.root,{refs:t,scope_refs:r}=R(e,null,{scope_ref_attr_name:"data-slot",ref_attr_name:"data-ref"});this.refsAnnotation&&b(t,this.refsAnnotation);for(let s in r)this.slotManager.registerSlot(s);this.$internals.refs=t,this.$internals.slotRefs=r}on(e,t){return this.$internals.eventEmitter.on(e,t)}emit(e,...t){return this.$internals.eventEmitter.emit(e,this,...t)}$on(e,t,r){return e.addEventListener(t,r,{signal:this.$internals.disconnectController.signal}),()=>e.removeEventListener(t,r)}onPrepareRender(e){return this.on("prepareRender",e)}onConnect(e){return this.on("connect",e)}onDisconnect(e){return this.on("disconnect",e)}onMount(e){return this.on("mount",e)}onBeforeUnmount(e){return this.on("beforeUnmount",e)}onUnmount(e){return this.on("unmount",e)}onCollapse(e){return this.on("collapse",e)}onExpand(e){return this.on("expand",e)}connect(e){if(this.#e===!0)throw new Error("Component is already connected");this.$internals.root=e,this.updateRefs(),this.$internals.disconnectController=new AbortController,this.#e=!0,this.slotManager.mountAllSlots(),this.emit("connect")}disconnect(){this.#e!==!1&&(this.#e=!1,this.$internals.disconnectController.abort(),this.$internals.refs={},this.$internals.slotRefs={},this.emit("disconnect"))}connectedCallback(){}disconnectedCallback(){}mount(e,t="replace"){if(!(e instanceof Element))throw new TypeError("Container must be a DOM Element");let r=["replace","append","prepend"];if(!r.includes(t))throw new Error(`Invalid mode: ${t}. Must be one of: ${r.join(", ")}`);let s=this.#r();if(s===null)throw new Error("Template is not set");if(this.$internals.mountMode=t,this.$internals.parentElement=this.parentComponent?null:e,this.#e===!0)return;let o=this.$internals.cloneTemplateOnRender?s.cloneNode(!0):s;o.setAttribute("data-component-root","true"),this.emit("prepareRender",o),t==="replace"?e.replaceChildren(o):t==="append"?e.append(o):t==="prepend"&&e.prepend(o),this.connect(o),this.emit("mount")}unmount(){this.#e!==!1&&(this.emit("beforeUnmount"),this.slotManager.unmountAll(),this.disconnect(),this.$internals.root?.remove(),this.$internals.elementsToRemove.forEach(e=>{e.remove()}),this.$internals.elementsToRemove.clear(),this.emit("unmount"))}rerender(){this.collapse(),this.expand()}update(...e){}show(){this.isConnected&&this.$internals.root?.classList.remove("d-none")}hide(){this.isConnected&&this.$internals.root?.classList.add("d-none")}collapse(){this.unmount(),this.#t=!0,this.emit("collapse")}expand(){if(this.#t=!1,this.#e===!0)return;let e=this.$internals.parentComponent;if(e===null)if(this.$internals.parentElement)if(this.$internals.parentElement.isConnected)this.mount(this.$internals.parentElement,this.$internals.mountMode);else{console.warn("Cannot expand a disconnected component without a parent element (parent element is not connected)");return}else{console.warn("Cannot expand a disconnected component without a parent element (no parent element specified)");return}else{if(e.isConnected===!1){console.warn("Cannot expand a disconnected parent component");return}let t=e.$internals.slotRefs[this.$internals.assignedSlotName];if(!t){console.warn(`Cannot find a rendered slot with name "${this.$internals.assignedSlotName}" in the parent component`);return}this.mount(t,this.$internals.mountMode)}this.emit("expand")}expandForce(){let e=[],t=this;for(;t;)e.push(t),t=t.$internals.parentComponent;for(let r=e.length-1;r>=0;r--)e[r].expand()}getSlotNames(){return this.slotManager.slotNames}addComponentToSlot(e,...t){let r=this.slotManager.attachToSlot(e,...t);this.#e&&r.mount()}get parentComponent(){return this.$internals.parentComponent||null}getRootNode(){if(!this.#e)throw new Error("Component is not connected to the DOM");return this.$internals.root}removeOnUnmount(e){this.$internals.elementsToRemove.add(e)}};var x=class{#e=!1;slotNames;activeSlotName;component;constructor(e,t,r){let s=e.slotManager;for(let o=0;o<t.length;o++)if(!s.hasSlot(t[o]))throw new Error(`Slot ${t[o]} does not exist in component`);this.component=e,this.slotNames=t.slice(),this.activeSlotName=r}toggle(e){if(this.#e)throw new Error("SlotToggler is destroyed");if(this.slotNames.indexOf(e)===-1)throw new Error(`Slot ${e} is not defined in SlotToggler`);if(e!=this.activeSlotName)for(let t=0;t<this.slotNames.length;t++)this.slotNames[t]==e?(this.component.slotManager.mountSlot(e),this.activeSlotName=e):this.component.slotManager.unmountSlot(this.slotNames[t])}destroy(){this.#e=!0,this.component=null,this.slotNames=[],this.activeSlotName=""}};export{S as Component,F as DOMReady,x as SlotToggler,y as Toggler,Y as copyToClipboard,M as createPaginationArray,ee as delegateEvent,C as escapeHtml,Z as fadeIn,J as fadeOut,W as formatBytes,re as formatDate,ne as formatDateTime,K as getDefaultLanguage,H as hideElements,_ as html,A as injectCoreStyles,X as isDarkMode,V as removeSpinnerFromButton,ie as renderPaginationElement,U as scrollToBottom,j as scrollToTop,q as showElements,G as showSpinnerInButton,Q as sleep,N as ui_button_status_waiting_off,I as ui_button_status_waiting_off_html,B as ui_button_status_waiting_on,se as unixtime,z as withMinimumTime};
