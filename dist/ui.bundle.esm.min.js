function F(n,t=window.document){t.readyState==="interactive"||t.readyState==="complete"?n():t.addEventListener("DOMContentLoaded",n)}function R(n){return n.replace(/[&<"']/g,function(t){return{"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"}[t]})}function B(n,t){n.disabled=!0,n.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+R(t)}function I(n,t){n.disabled=!1,n.innerText=t}function j(n,t){n.disabled=!1,n.innerHTML=t}function H(n){n.scrollTop=0}function q(n){n.scrollTop=n.scrollHeight}function U(...n){for(let t=0;t<n.length;t++)n[t].classList.add("d-none")}function N(...n){for(let t=0;t<n.length;t++)n[t].classList.remove("d-none")}function G(n,t=null,e=window.document){if(n.getElementsByClassName("spinner-border")[0])return;let r=e.createElement("span");t?r.className=t:r.className="spinner-border spinner-border-sm",n.prepend(r)}function X(n){let t=n.querySelector(".spinner-border");t&&t.remove()}function K(n=window){return!!(n.matchMedia&&n.matchMedia("(prefers-color-scheme: dark)").matches)}function V(){let n=navigator.language.match(/^[a-z]+/);return n?n[0]:"en"}function W(n,t=2,e,r){e=e||"en",r=r||{en:["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]};let s=r[e]?r[e]:r.en;if(n===0)return"0 "+s[0];let o=n<0?"-":"";n=Math.abs(n);let i=1024,l=t<0?0:t,c=Math.floor(Math.log(n)/Math.log(i));return o+parseFloat((n/Math.pow(i,c)).toFixed(l))+" "+s[c]}function Y(n){return navigator.clipboard.writeText(n)}function Z(n,t=400,e=window){n.style.opacity="0",n.style.display="block";let r=+new Date,s=()=>{let o=+new Date;n.style.opacity=String(+n.style.opacity+(o-r)/t),r=+new Date,+n.style.opacity<1&&(e.requestAnimationFrame&&e.requestAnimationFrame(s)||setTimeout(s,16))};s()}function J(n,t=400,e=window){n.style.opacity="1";let r=+new Date,s=()=>{let o=+new Date;n.style.opacity=String(+n.style.opacity-(o-r)/t),r=+new Date,+n.style.opacity>0&&(e.requestAnimationFrame&&e.requestAnimationFrame(s)||setTimeout(s,16))};s()}function Q(n){return new Promise(t=>setTimeout(t,n))}function z(n,t){return new Promise((e,r)=>{let s=Date.now(),o=!1,i=!1,l,c,h=setTimeout(()=>{i=!0,o&&(c?r(c):e(l))},t);n.then(a=>{l=a,o=!0,Date.now()-s>=t&&i&&e(a)}).catch(a=>{c=a,o=!0,Date.now()-s>=t&&i&&r(a)})})}function tt(n,t,e,r){t.addEventListener(n,function(s){let o;s.target&&s.target instanceof Element&&(o=s.target,s.target.matches(e)?r(s,o):s.target.closest(e)&&(o=s.target.closest(e),r(s,o)))})}function nt(n){var t=new Date(n*1e3);return`${t.toLocaleDateString("en-GB")} ${t.toLocaleTimeString("en-GB")}`}function rt(n){var t=new Date(n*1e3);return`${t.toLocaleDateString("en-GB")}`}function st(n=new Date){return Math.floor(n.getTime()/1e3)}function M(n,t,e=2,r="..."){if(t<=1)return["1"];let s=[n];for(let f=1;f<=e;f++)s.unshift(n-f),s.push(n+f);let o=s.filter(f=>f>1&&f<t).map(f=>f.toString()),i=n>3+e,l=n===3+e,c=n<t-(2+e),h=n===t-(2+e);l&&o.unshift("2"),h&&o.push((t-1).toString()),i&&o.unshift(r),c&&o.push(r);let a=t.toString();return["1",...o,a]}function it(n,t,e,r){let s=document.createElement("ul");return s.classList.add("pagination"),M(n,t).forEach(i=>{let l=document.createElement("li");if(l.classList.add("page-item"),i=="..."){l.classList.add("disabled");let h=document.createElement("span");h.classList.add("page-link"),h.textContent=i,l.appendChild(h),s.appendChild(l);return}let c=document.createElement("a");c.classList.add("page-link"),i==n.toString()&&l.classList.add("active"),e?c.href=e(Number(i)):c.href="#",c.textContent=i,c.setAttribute("data-page-value",i),l.appendChild(c),s.appendChild(l),r&&c.addEventListener("click",h=>{h.preventDefault();let a=h.target;if(!a)return!1;let f=a.getAttribute("data-page-value");return f?r(Number(f)):!1})}),s}var E=class{items=new Map;#t="";addItem(t,e,r){if(this.items.has(t))throw new Error("Item already exists");this.items.set(t,{isActive:!1,on:e,off:r})}removeItem(t){this.#t===t&&(this.#t=""),this.items.delete(t)}setActive(t){if(!this.items.has(t))throw new Error("Item not found");if(this.#t!==t)for(let[e,r]of this.items)e===t?(this.#t=e,r.isActive||(r.isActive=!0,r.on(e))):(r.isActive&&r.off(e),r.isActive=!1)}runCallbacks(){for(let[t,e]of this.items)e.isActive?e.on(t):e.off(t)}init(t){this.setActive(t),this.runCallbacks()}};function A(n=window.document){if(!n)throw new Error("Document is null. Cannot inject core styles.");let t=`
.d-none {
    display: none !important;
}

html-fragment {
    display: contents;
}
`,e=new CSSStyleSheet;e.replaceSync(t),n.adoptedStyleSheets=[...n.adoptedStyleSheets,e]}var $="data-scope",L="unnamed-scope",D="data-ref",m=class{ref_attr_name;scope_ref_attr_name;window;isScopeElement;includeRoot;scope_auto_name_prefix;constructor(){this.ref_attr_name=D,this.scope_ref_attr_name=$,this.window=globalThis.window,this.isScopeElement=null,this.includeRoot=!1,this.scope_auto_name_prefix=L}toString(){return`ScopeConfig(ref_attr_name=${this.ref_attr_name}, scope_ref_attr_name=${this.scope_ref_attr_name}, includeRoot=${this.includeRoot}, scope_auto_name_prefix=${this.scope_auto_name_prefix}, window=${this.window?"defined":"undefined"}, isScopeElement=${this.isScopeElement})`}},u=new m;function v(n,t){var e=null;t||(t=u);let r=t.scope_ref_attr_name||$,s=t.isScopeElement;return s?e=s(n,t):e=n.getAttribute(r),e===null?null:e}function y(n={}){let t=new m;return t.includeRoot=n.hasOwnProperty("includeRoot")&&typeof n.includeRoot<"u"?n.includeRoot:u.includeRoot,t.scope_auto_name_prefix=n.hasOwnProperty("scope_auto_name_prefix")&&typeof n.scope_auto_name_prefix=="string"?n.scope_auto_name_prefix:u.scope_auto_name_prefix,t.isScopeElement=n.hasOwnProperty("isScopeElement")&&typeof n.isScopeElement<"u"?n.isScopeElement:u.isScopeElement,t.ref_attr_name=n.hasOwnProperty("ref_attr_name")&&typeof n.ref_attr_name=="string"?n.ref_attr_name:u.ref_attr_name,t.window=n.hasOwnProperty("window")&&typeof n.window<"u"?n.window:u.window,t.scope_ref_attr_name=n.hasOwnProperty("scope_ref_attr_name")&&typeof n.scope_ref_attr_name=="string"?n.scope_ref_attr_name:u.scope_ref_attr_name,t}function b(n,t,e={}){var r={},s={},o=[];let i=y(e);function l(a){var f=a.getAttribute(i.ref_attr_name);if(f!=null&&f!=""&&(r[f]?globalThis.window?console.warn(`Element has reference #${f} which is already used
`,`
element: `,a,`
reference #${f}: `,r[f],`
scope root: `,n):console.warn(`Element has reference #${f} which is already used
`):r[f]=a),a!=n){var d=v(a,i);if(typeof d!="string")return;d!=""?s[d]?(console.warn(`scope #${d} is already used`,globalThis.window?a:""),o.push(a)):s[d]=a:o.push(a)}t&&t(a)}i.includeRoot===!0&&n instanceof i.window.HTMLElement&&(r.root=n,t&&t(n)),O(n,l,i);var c=0;let h=i.scope_auto_name_prefix;return o.forEach(a=>{for(;s[h+c.toString()];)c++;s[h+c.toString()]=a}),{refs:r,scope_refs:s}}function O(n,t,e){let r=y(e);function s(l){var c=l,h=c.parentElement;return h&&h!=n&&v(h,r)!==null?2:1}let o=r.window.document.createTreeWalker(n,1,s);var i;for(r.includeRoot===!0&&n instanceof r.window.HTMLElement&&t(n);i=o.nextNode();)t(i)}function T(n,t){for(let e in t){let r=n[e];if(!r)throw new Error(`Missing data-ref: ${e}`);let s=typeof t[e]=="function"?t[e].prototype:t[e];if(s.isPrototypeOf(r)===!1)throw new Error(`The data-ref "${e}" must be an instance of ${s.constructor.name} (actual: ${r.constructor.name})`)}}function S(n,t){if(typeof n!="string")throw new Error("html must be a string");let e=y(t);if(!e.window)throw new Error("window is not defined in options");let o=e.window.document.createElement("template");return o.innerHTML=n,o.content}var w=class{name;components=new Set;#t;constructor(t,e){this.name=t,this.#t=e}attach(t){t.$internals.parentComponent=this.#t,t.$internals.assignedSlotName=this.name,this.components.add(t)}detach(t){t.$internals.parentComponent=null,t.$internals.assignedSlotName="",this.components.delete(t)}detachAll(){this.components.forEach(t=>{t.$internals.parentComponent=null,t.$internals.assignedSlotName=""}),this.components.clear()}mount(){if(!this.#t.isConnected){console.warn(`Cannot mount Slot "${this.name}" in disconnected component ${this.#t.constructor.name}`);return}let t=this.#t.$internals.slotRefs[this.name];if(!t){console.warn(`Cannot get root element for Slot "${this.name}" does not exist in component "${this.#t.constructor.name}"`);return}this.components.forEach(e=>{e.isCollapsed||e.mount(t,"append")})}unmount(){this.components.forEach(t=>{t.unmount()})}clear(){this.unmount(),this.detachAll()}};var g=class{slots=new Map;#t;constructor(t){this.#t=t}registerSlot(t){let e=this.getSlot(t);if(e!=null)return e;{let r=new w(t,this.#t);return this.slots.set(t,r),r}}getSlot(t){return this.slots.get(t)||null}hasSlot(t){return this.slots.has(t)}removeSlot(t){this.hasSlot(t)&&(this.clearSlotContent(t),this.slots.delete(t))}hasSlotContent(t){let e=this.getSlot(t);return e==null?!1:e.components.size>0}clearSlotContent(t){let e=this.getSlot(t);return e==null?!1:(e.clear(),!0)}get slotNames(){return Array.from(this.slots.keys())}mountAllSlots(){this.#t.isConnected&&this.slots.forEach(t=>{t.mount()})}mountSlot(t){let e=this.getSlot(t);if(!e){console.warn(`Slot "${t}" does not exist in component "${this.#t.constructor.name}"`);return}e.mount()}unmountAll(){for(let[t,e]of this.slots)e.unmount()}unmountSlot(t){let e=this.getSlot(t);e?.unmount()}attachToSlot(t,...e){let r=this.registerSlot(t);for(let s=0;s<e.length;s++){let o=e[s],i=this.findSlotByComponent(o);if(i!=null){console.warn(`Component ${o.constructor.name} is already assigned to slot ${i.name}.`);continue}r.attach(o)}return r}removeComponent(t){let e=this.findSlotByComponent(t);return e?(e.detach(t),t.unmount(),!0):!1}findSlotByComponent(t){return t.$internals.parentComponent!=this.#t?null:this.getSlot(t.$internals.assignedSlotName)}};var p=class{events={};#t={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]};#e=!1;logErrors=!0;get isDestroyed(){return this.#e}on(t,e){if(this.#e)throw new Error("EventEmitter is destroyed");typeof this.events[t]!="object"&&(this.events[t]=[]),this.events[t].push(e);let r=this,s=function(){r.removeListener(t,e)};return this.events[t].length==1&&this.#r("#has-listeners",t),s}#n(t,e){this.#t[t].push(e);let r=this;return function(){r.#s(t,e)}}#s(t,e){var r;typeof this.#t[t]=="object"&&(r=this.#t[t].indexOf(e),r>-1&&this.#t[t].splice(r,1))}off(t,e){return this.removeListener(t,e)}removeListener(t,e){if(!this.#e){var r;this.events[t]&&(r=this.events[t].indexOf(e),r>-1&&(this.events[t].splice(r,1),this.events[t].length==0&&this.#r("#no-listeners",t)))}}emit(t,...e){if(!this.#e&&typeof this.events[t]=="object")for(var r=this.events[t],s=r.length,o=0;o<s;o++)try{r[o].apply(this,e)}catch(i){this.#r("#listener-error",i,t,...e),this.logErrors&&console.error(`Error in listener for event "${t}":`,i)}}#r(t,...e){for(var r=this.#t[t],s=r.length,o=0;o<s;o++)try{r[o].apply(this,e)}catch(i){let l=i;if(l.cause={event:t,args:e},t==="#listener-error"){this.logErrors&&console.error(`Error in listener for internal event "${t}":`,l);continue}t==="#has-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${t}":`,l),this.#r("#listener-error",l,"#has-listeners",...e)),t==="#no-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${t}":`,l),this.#r("#listener-error",l,"#no-listeners",...e))}}once(t,e){return this.on(t,function r(){this.removeListener(t,r),e.apply(this,arguments)})}waitForEvent(t,e=0){if(this.#e)throw new Error("EventEmitter is destroyed");return new Promise(r=>{let s,o=this.on(t,()=>{e>0&&clearTimeout(s),o(),r(!0)});e>0&&(s=setTimeout(()=>{o(),r(!1)},e))})}waitForAnyEvent(t,e=0){if(this.#e)throw new Error("EventEmitter is destroyed");return new Promise(r=>{let s,o=[],i=()=>{e>0&&clearTimeout(s),o.forEach(l=>{l()}),r(!0)};t.forEach(l=>{o.push(this.on(l,i))}),e>0&&(s=setTimeout(()=>{i(),r(!1)},e))})}clear(){this.events={}}destroy(){this.#e||(this.#e=!0,this.#t={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]},this.events={})}clearEventListeners(t){if(this.#e)return;(this.events[t]||[]).length>0&&(this.events[t]=[],this.#r("#no-listeners",t))}onHasEventListeners(t){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#has-listeners",t)}onNoEventListeners(t){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#no-listeners",t)}onListenerError(t){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#listener-error",t)}};var _=class{constructor(){this.eventEmitter=new p,this.disconnectController=new AbortController,this.root=null,this.textUpdateFunction=null,this.textResources={},this.refs={},this.slotRefs={},this.parentComponent=null,this.assignedSlotName="",this.mountMode="replace"}};function P(n){n.reloadText();try{n.connectedCallback()}catch(t){console.error("Error in connectedCallback:",t)}}function k(n){try{n.disconnectedCallback()}catch(t){console.error("Error in disconnectedCallback:",t)}}var x=class{$internals=new _;#t=void 0;layout;refsAnnotation;#e=null;#n=!1;slotManager=new g(this);#s=!1;constructor(){this.onConnect(P),this.onDisconnect(k)}get isConnected(){return this.#n}get isCollapsed(){return this.#s}reloadText(){this.$internals.textUpdateFunction&&this.$internals.textUpdateFunction(this)}setTextUpdateFunction(t){this.$internals.textUpdateFunction=t}#r(){this.layout&&(this.#t=this.layout,this.layout=void 0);let t=this.#t||void 0;if(t==null)return;let e;if(typeof t=="function"){let r=t(this);r instanceof Node?e=r:e=S(r.trim())}else e=S(t.trim());if(e instanceof DocumentFragment){if(e.children.length!==1)throw new Error("Layout must have exactly one root element");e=e.children[0]}this.#e=e}setLayout(t,e){this.#t=t,this.#e=null,e&&(this.refsAnnotation=e)}setRenderer(t,e){this.setLayout(t,e)}getRefs(){if(!this.#n)throw new Error("Component is not connected to the DOM");return this.$internals.refs}getRef(t){let e=this.getRefs();if(!(t in e))throw new Error(`Ref "${t}" does not exist`);return e[t]}hasRef(t){let e=this.getRefs();return t in e}updateRefs(){if(!this.$internals.root)throw new Error("Component is not connected to the DOM");let t=this.$internals.root,{refs:e,scope_refs:r}=b(t,null,{scope_ref_attr_name:"data-slot",ref_attr_name:"data-ref"});this.refsAnnotation&&T(e,this.refsAnnotation);for(let s in r)this.slotManager.registerSlot(s);this.$internals.refs=e,this.$internals.slotRefs=r}on(t,e){return this.$internals.eventEmitter.on(t,e)}emit(t,...e){return this.$internals.eventEmitter.emit(t,this,...e)}$on(t,e,r){return t.addEventListener(e,r,{signal:this.$internals.disconnectController.signal}),()=>t.removeEventListener(e,r)}onPrepareRender(t){return this.on("prepareRender",t)}onConnect(t){return this.on("connect",t)}onDisconnect(t){return this.on("disconnect",t)}onMount(t){return this.on("mount",t)}onBeforeUnmount(t){return this.on("beforeUnmount",t)}onUnmount(t){return this.on("unmount",t)}onCollapse(t){return this.on("collapse",t)}onExpand(t){return this.on("expand",t)}connect(t){if(this.#n===!0)throw new Error("Component is already connected");this.$internals.root=t,this.updateRefs(),this.$internals.disconnectController=new AbortController,this.#n=!0,this.slotManager.mountAllSlots(),this.emit("connect")}disconnect(){this.#n!==!1&&(this.#n=!1,this.$internals.disconnectController.abort(),this.$internals.refs={},this.$internals.slotRefs={},this.emit("disconnect"))}connectedCallback(){}disconnectedCallback(){}mount(t,e="replace"){if(!(t instanceof Element))throw new TypeError("Container must be a DOM Element");let r=["replace","append","prepend"];if(!r.includes(e))throw new Error(`Invalid mode: ${e}. Must be one of: ${r.join(", ")}`);if(this.#e===null&&this.#r(),this.#e===null)throw new Error("Template is not set");if(this.$internals.mountMode=e,this.#n===!0)return;let s=this.#e.cloneNode(!0);this.emit("prepareRender",s);let o=s;e==="replace"?t.replaceChildren(s):e==="append"?t.append(s):e==="prepend"&&t.prepend(s),this.connect(o),this.emit("mount")}unmount(){this.#n!==!1&&(this.emit("beforeUnmount"),this.slotManager.unmountAll(),this.disconnect(),this.$internals.root?.remove(),this.emit("unmount"))}rerender(){if(this.isConnected){let t=this.$internals.root.parentElement;this.unmount(),this.mount(t,this.$internals.mountMode)}else{let t=this.$internals.parentComponent||null;if(t===null){console.error("Cannot rerender a disconnected component without a parent component");return}if(t.isConnected===!1){console.error("Cannot rerender a disconnected parent component");return}let e=t.$internals.slotRefs[this.$internals.assignedSlotName]||null;if(!e){console.error("Cannot find a rendered slot with name "+this.$internals.assignedSlotName+" in the parent component");return}this.mount(e,this.$internals.mountMode)}}update(...t){}show(){this.isConnected&&this.$internals.root?.classList.remove("d-none")}hide(){this.isConnected&&this.$internals.root?.classList.add("d-none")}collapse(){this.unmount(),this.#s=!0,this.emit("collapse")}expand(){this.#s=!1,this.#n!==!0&&this.$internals.parentComponent!==null&&(this.$internals.parentComponent.addComponentToSlot(this.$internals.assignedSlotName,this),this.emit("expand"))}getSlotNames(){return this.slotManager.slotNames}addComponentToSlot(t,...e){let r=this.slotManager.attachToSlot(t,...e);this.#n&&r.mount()}get parentComponent(){return this.$internals.parentComponent||null}getRootNode(){if(!this.#n)throw new Error("Component is not connected to the DOM");return this.$internals.root}};var C=class{#t=!1;slotNames;activeSlotName;component;constructor(t,e,r){let s=t.slotManager;for(let o=0;o<e.length;o++)if(!s.hasSlot(e[o]))throw new Error(`Slot ${e[o]} does not exist in component`);this.component=t,this.slotNames=e.slice(),this.activeSlotName=r}toggle(t){if(this.#t)throw new Error("SlotToggler is destroyed");if(this.slotNames.indexOf(t)===-1)throw new Error(`Slot ${t} is not defined in SlotToggler`);if(t!=this.activeSlotName)for(let e=0;e<this.slotNames.length;e++)this.slotNames[e]==t?(this.component.slotManager.mountSlot(t),this.activeSlotName=t):this.component.slotManager.unmountSlot(this.slotNames[e])}destroy(){this.#t=!0,this.component=null,this.slotNames=[],this.activeSlotName=""}};export{x as Component,F as DOMReady,C as SlotToggler,E as Toggler,Y as copyToClipboard,M as createPaginationArray,tt as delegateEvent,R as escapeHtml,Z as fadeIn,J as fadeOut,W as formatBytes,rt as formatDate,nt as formatDateTime,V as getDefaultLanguage,U as hideElements,A as injectCoreStyles,K as isDarkMode,X as removeSpinnerFromButton,it as renderPaginationElement,q as scrollToBottom,H as scrollToTop,N as showElements,G as showSpinnerInButton,Q as sleep,I as ui_button_status_waiting_off,j as ui_button_status_waiting_off_html,B as ui_button_status_waiting_on,st as unixtime,z as withMinimumTime};
