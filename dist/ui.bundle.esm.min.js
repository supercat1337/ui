function O(r,e=window.document){e.readyState==="interactive"||e.readyState==="complete"?r():e.addEventListener("DOMContentLoaded",r)}function T(r){return r.replace(/[&<"']/g,e=>({"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"})[e])}function L(r,e){r.disabled=!0,r.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+T(e)}function F(r,e){r.disabled=!1,r.innerText=e}function k(r,e){r.disabled=!1,r.innerHTML=e}function I(r){r.scrollTop=0}function B(r){r.scrollTop=r.scrollHeight}function j(...r){for(let e=0;e<r.length;e++)r[e].classList.add("d-none")}function P(...r){for(let e=0;e<r.length;e++)r[e].classList.remove("d-none")}function U(r,e=null){if(r.getElementsByClassName("spinner-border")[0])return;let t=document.createElement("span");e?t.className=e:t.className="spinner-border spinner-border-sm",r.prepend(t)}function H(r){let e=r.querySelector(".spinner-border");e&&e.remove()}function q(r=window){return!!(r.matchMedia&&r.matchMedia("(prefers-color-scheme: dark)").matches)}function G(){let r=navigator.language.match(/^[a-z]+/);return r?r[0]:"en"}function X(r,e=2,t,n){t=t||"en",n=n||{en:["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]};let s=n[t]?n[t]:n.en;if(r===0)return"0 "+s[0];let i=r<0?"-":"";r=Math.abs(r);let o=1024,l=e<0?0:e,f=Math.floor(Math.log(r)/Math.log(o));return i+parseFloat((r/Math.pow(o,f)).toFixed(l))+" "+s[f]}function W(r){return navigator.clipboard.writeText(r)}function K(r,e=400){r.style.opacity="0",r.style.display="block";let t=+new Date,n=()=>{let s=+new Date;r.style.opacity=String(+r.style.opacity+(s-t)/e),t=+new Date,+r.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}function Y(r,e=400){r.style.opacity="1";let t=+new Date,n=()=>{let s=+new Date;r.style.opacity=String(+r.style.opacity-(s-t)/e),t=+new Date,+r.style.opacity>0&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}function J(r){var e=new Date(r*1e3);return`${e.toLocaleDateString("en-GB")} ${e.toLocaleTimeString("en-GB")}`}function N(r){var e=new Date(r*1e3);return`${e.toLocaleDateString("en-GB")}`}function Q(r=new Date){return Math.floor(r.getTime()/1e3)}var E=class{items=new Map;#t;addItem(e,t,n){if(this.items.has(e))throw new Error("Item already exists");this.items.set(e,{isActive:!1,on:t,off:n})}removeItem(e){this.#t===e&&(this.#t=""),this.items.delete(e)}setActive(e){if(!this.items.has(e))throw new Error("Item not found");if(this.#t!==e)for(let[t,n]of this.items)t===e?(this.#t=t,n.isActive||(n.isActive=!0,n.on(t))):(n.isActive&&n.off(t),n.isActive=!1)}runCallbacks(){for(let[e,t]of this.items)t.isActive?t.on(e):t.off(e)}init(e){this.setActive(e),this.runCallbacks()}};function g(r=window.document){if(r===null)throw new Error("Document is null. Cannot inject core styles.");let e=`
.d-none {
    display: none !important;
}

html-fragment {
    display: contents;
}
`,t=new CSSStyleSheet;t.replaceSync(e),r.adoptedStyleSheets=[...r.adoptedStyleSheets,t]}var M="scope-ref";var d={scope_auto_name_prefix:"$",scope_ref_attr_name:M,ref_attr_name:"ref",window:globalThis.window,is_scope_element:void 0,include_root:!1},p={};function x(r,e){var t;return e.is_scope_element?t=e.is_scope_element(r,e):t=r.getAttribute(e.scope_ref_attr_name),t===null?!1:t}function y(r={},e=!0){let t={scope_auto_name_prefix:p.scope_auto_name_prefix||d.scope_auto_name_prefix,scope_ref_attr_name:p.scope_ref_attr_name||d.scope_ref_attr_name,ref_attr_name:p.ref_attr_name||d.ref_attr_name,window:p.window||d.window,is_scope_element:p.is_scope_element||d.is_scope_element,include_root:p.include_root||d.include_root},n=Object.assign({},t,r);if(e&&!n.window)throw new Error("options.window is not defined");return n}function $(r,e,t={}){var n={},s={},i=[];let o=y(t);function l(a){var h=a.getAttribute(o.ref_attr_name);if(h!=null&&h!=""&&(n[h]?globalThis.window?console.warn(`Element has reference #${h} which is already used
`,`
element: `,a,`
reference #${h}: `,n[h],`
scope root: `,r):console.warn(`Element has reference #${h} which is already used
`):n[h]=a),a!=r){var u=x(a,o);if(typeof u!="string")return;u!=""?s[u]?(globalThis.window?console.warn(`scope #${u} is already used`,a):console.warn(`scope #${u} is already used`),i.push(a)):s[u]=a:i.push(a)}e&&e(a)}o.include_root===!0&&r instanceof o.window.HTMLElement&&(n.root=r,e&&e(r)),A(r,l,o);var f=0;let c=o.scope_auto_name_prefix;return i.forEach(a=>{for(;s[c+f.toString()];)f++;s[c+f.toString()]=a}),{refs:n,scope_refs:s}}function A(r,e,t){let n=y(t);function s(l){var f=l,c=f.parentElement;return c&&c!=r&&x(c,n)!==!1?2:1}let i=n.window.document.createTreeWalker(r,1,s);var o;for(n.include_root===!0&&r instanceof n.window.HTMLElement&&e(r);o=i.nextNode();)e(o)}function b(r,e){for(let t in e){let n=r[t];if(!n)throw new Error(`Missing ref: ${t}`);let s=typeof e[t]=="function"?e[t].prototype:e[t];if(s.isPrototypeOf(n)===!1)throw new Error(`The ref "${t}" must be an instance of ${s.constructor.name} (actual: ${n.constructor.name})`)}}function S(r,e){if(typeof r!="string")throw new Error("html must be a string");let i=y(e).window.document.createElement("template");return i.innerHTML=r,i.content}var w=class{#t=new Set;#e=new Map;#n=new Set;#r;#s=!1;constructor(e){this.#r=e}setSlotStrictMode(e){this.#s=e}defineSlots(...e){let t=new Set(e);for(let n of this.#t)t.has(n)||this.removeSlot(n);for(let n of t)this.addSlot(n)}addSlot(e){this.#e.has(e)||this.#e.set(e,new Set),this.#t.add(e)}removeSlot(e){if(!this.#t.has(e))return;let t=this.#e.get(e);t&&(t.forEach(n=>{this.#r.removeChildComponent(n),n.unmount(),this.#n.delete(n)}),this.#e.delete(e)),this.#t.delete(e)}get slotNames(){return Array.from(this.#t)}slotExists(e){return this.#t.has(e)}addComponentsToSlot(e,...t){if(!this.slotExists(e)){if(this.#s)throw new Error(`Slot "${e}" does not exist`);console.warn(`Warning: Slot "${e}" does not exist in component "${this.#r.constructor.name}". It will be created automatically.`)}let n=this.#e.get(e);n||(n=new Set,this.#e.set(e,n));for(let s=0;s<t.length;s++)this.#n.add(t[s]),n.add(t[s])}removeChildComponent(e){this.#n.delete(e);for(let[t,n]of this.#e)if(n.has(e)){n.delete(e);break}}get children(){return this.#n}mountChildren(e){if(this.#r.isConnected!==!0)return;let t=e?[e]:Array.from(this.#t);if(t.some(s=>!this.#r.$internals.slotRefs[s])){if(this.#s)throw new Error(`One or more slot names do not exist in component "${this.#r.constructor.name}"`);if(this.#r.updateRefs(),t.some(i=>!this.#r.$internals.slotRefs[i])){console.warn(`One or more slot names do not exist in component "${this.#r.constructor.name}"`);return}}for(let s of t){let i=this.#e.get(s),o=this.#r.$internals.slotRefs[s];if(!(!i||!o))for(let l of i)l.isCollapsed||l.mount(o,"append")}}unmountChildren(e){let t=e?[e]:Array.from(this.#t);for(let n=0;n<t.length;n++){let s=Array.from(this.#e.get(t[n])||[]);for(let i=0;i<s.length;i++)s[i].unmount()}}};var m=class{events={};#t={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]};#e=!1;logErrors=!0;get isDestroyed(){return this.#e}on(e,t){if(this.#e)throw new Error("EventEmitter is destroyed");typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let n=this,s=function(){n.removeListener(e,t)};return this.events[e].length==1&&this.#s("#has-listeners",e),s}#n(e,t){this.#t[e].push(t);let n=this;return function(){n.#r(e,t)}}#r(e,t){var n;typeof this.#t[e]=="object"&&(n=this.#t[e].indexOf(t),n>-1&&this.#t[e].splice(n,1))}off(e,t){return this.removeListener(e,t)}removeListener(e,t){if(!this.#e){var n;this.events[e]&&(n=this.events[e].indexOf(t),n>-1&&(this.events[e].splice(n,1),this.events[e].length==0&&this.#s("#no-listeners",e)))}}emit(e,...t){if(!this.#e&&typeof this.events[e]=="object")for(var n=this.events[e],s=n.length,i=0;i<s;i++)try{n[i].apply(this,t)}catch(o){this.#s("#listener-error",o,e,...t),this.logErrors&&console.error(`Error in listener for event "${e}":`,o)}}#s(e,...t){for(var n=this.#t[e],s=n.length,i=0;i<s;i++)try{n[i].apply(this,t)}catch(o){let l=o;if(l.cause={event:e,args:t},e==="#listener-error"){this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l);continue}e==="#has-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l),this.#s("#listener-error",l,"#has-listeners",...t)),e==="#no-listeners"&&(this.logErrors&&console.error(`Error in listener for internal event "${e}":`,l),this.#s("#listener-error",l,"#no-listeners",...t))}}once(e,t){return this.on(e,function n(){this.removeListener(e,n),t.apply(this,arguments)})}waitForEvent(e,t=0){if(this.#e)throw new Error("EventEmitter is destroyed");return new Promise(n=>{let s,i=this.on(e,()=>{t>0&&clearTimeout(s),i(),n(!0)});t>0&&(s=setTimeout(()=>{i(),n(!1)},t))})}waitForAnyEvent(e,t=0){if(this.#e)throw new Error("EventEmitter is destroyed");return new Promise(n=>{let s,i=[],o=()=>{t>0&&clearTimeout(s),i.forEach(l=>{l()}),n(!0)};e.forEach(l=>{i.push(this.on(l,o))}),t>0&&(s=setTimeout(()=>{o(),n(!1)},t))})}clear(){this.events={}}destroy(){this.#e||(this.#e=!0,this.#t={"#has-listeners":[],"#no-listeners":[],"#listener-error":[]},this.events={})}clearEventListeners(e){if(this.#e)return;(this.events[e]||[]).length>0&&(this.events[e]=[],this.#s("#no-listeners",e))}onHasEventListeners(e){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#has-listeners",e)}onNoEventListeners(e){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#no-listeners",e)}onListenerError(e){if(this.#e)throw new Error("EventEmitter is destroyed");return this.#n("#listener-error",e)}};var _=class{constructor(){this.eventEmitter=new m,this.disconnectController=new AbortController,this.root=null,this.textUpdateFunction=null,this.textResources={},this.refs={},this.slotRefs={},this.parentComponent=null,this.parentSlotName=""}};function R(r){r.reloadText();try{r.connectedCallback()}catch(e){console.error("Error in connectedCallback:",e)}}function D(r){try{r.disconnectedCallback()}catch(e){console.error("Error in disconnectedCallback:",e)}}var v=class r{$internals=new _;#t=void 0;layout;slots;refsAnnotation;#e=null;#n=!1;slotManager=new w(this);isCollapsed=!1;constructor(){this.onConnect(R),this.onDisconnect(D)}reloadText(){this.$internals.textUpdateFunction&&this.$internals.textUpdateFunction(this)}setTextUpdateFunction(e){this.$internals.textUpdateFunction=e}#r(){this.layout&&(this.#t=this.layout,this.layout=void 0);let e=this.#t||void 0;if(e==null)return;let t;if(typeof e=="function"){let s=e(this);s instanceof Node?t=s:t=S(s)}else t=S(e);let n=0;for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===1&&n++;if(n!==1)throw new Error("Layout must have exactly one root element");this.#e=t}setLayout(e,t){this.#t=e,this.#e=null,t&&(this.refsAnnotation=t)}getRefs(){if(!this.#n)throw new Error("Component is not connected to the DOM");return this.$internals.refs}getRef(e){let t=this.getRefs();if(!(e in t))throw new Error(`Ref "${e}" does not exist`);return t[e]}hasRef(e){let t=this.getRefs();return e in t}updateRefs(){if(!this.$internals.root)throw new Error("Component is not connected to the DOM");let e=this.$internals.root,{refs:t,scope_refs:n}=$(e);this.refsAnnotation&&b(t,this.refsAnnotation);for(let s in n)this.slotManager.addSlot(s);this.$internals.refs=t,this.$internals.slotRefs=n}on(e,t){return this.$internals.eventEmitter.on(e,t)}emit(e,...t){return this.$internals.eventEmitter.emit(e,this,...t)}onBeforeConnect(e){return this.on("beforeConnect",e)}onConnect(e){return this.on("connect",e)}onDisconnect(e){return this.on("disconnect",e)}onMount(e){return this.on("mount",e)}onBeforeUnmount(e){return this.on("beforeUnmount",e)}onUnmount(e){return this.on("unmount",e)}onCollapse(e){return this.on("collapse",e)}onExpand(e){return this.on("expand",e)}get isConnected(){return this.#n}connect(e){if(this.#n===!0)throw new Error("Component is already connected");this.$internals.root=e,this.updateRefs(),this.$internals.disconnectController=new AbortController,this.#n=!0,this.slotManager.mountChildren(),this.emit("connect")}disconnect(){this.#n!==!1&&(this.#n=!1,this.$internals.disconnectController.abort(),this.$internals.refs={},this.$internals.slotRefs={},this.emit("disconnect"))}connectedCallback(){}disconnectedCallback(){}mount(e,t="replace"){if(!(e instanceof Element))throw new TypeError("Container must be a DOM Element");let n=["replace","append","prepend"];if(!n.includes(t))throw new Error(`Invalid mode: ${t}. Must be one of: ${n.join(", ")}`);if(this.#e===null&&this.#r(),this.#e===null)throw new Error("Template is not set");if(this.#n===!0)return;let s=this.#e.cloneNode(!0);this.emit("beforeConnect",s);let i=s.firstElementChild;t==="replace"?e.replaceChildren(s):t==="append"?e.append(s):t==="prepend"&&e.prepend(s),this.connect(i),this.emit("mount")}unmount(){this.#n!==!1&&(this.emit("beforeUnmount"),this.slotManager.unmountChildren(),this.disconnect(),this.$internals.root?.remove(),this.emit("unmount"))}collapse(){this.unmount(),this.isCollapsed=!0,this.emit("collapse")}expand(){this.isCollapsed=!1,this.#n!==!0&&this.$internals.parentComponent!==null&&(this.$internals.parentComponent.addComponentToSlot(this.$internals.parentSlotName,this),this.emit("expand"))}show(){this.isConnected&&this.$internals.root?.classList.remove("d-none")}hide(){this.isConnected&&this.$internals.root?.classList.add("d-none")}$on(e,t,n){return e.addEventListener(t,n,{signal:this.$internals.disconnectController.signal}),()=>e.removeEventListener(t,n)}getSlotNames(){return this.slotManager.slotNames}defineSlots(...e){this.slotManager.defineSlots(...e)}addComponentToSlot(e,...t){if(!t.every(n=>n instanceof r))throw new Error("All components must be instances of Component");typeof this.slots<"u"&&this.defineSlots(...this.slots),this.slotManager.addComponentsToSlot(e,...t);for(let n=0;n<t.length;n++)t[n].$internals.parentComponent=this,t[n].$internals.parentSlotName=e;this.#n&&this.slotManager.mountChildren(e)}removeChildComponent(e){e.$internals.parentComponent===this&&(e.$internals.parentComponent=null,e.$internals.parentSlotName="",this.slotManager.removeChildComponent(e))}};var C=class{constructor(e,t,n){typeof e.slots<"u"&&(e.defineSlots(...e.slots),e.slots=void 0);for(let s=0;s<t.length;s++)if(e.slotManager.slotExists(t[s])===!1)throw new Error(`Slot ${t[s]} does not exist in component`);if(e.slotManager.slotExists(n)===!1)throw new Error(`Slot ${n} does not exist in component`);this.component=e,this.slotNames=t,this.activeSlotName=n}toggle(e){if(this.slotNames.indexOf(e)===-1)throw new Error(`Slot ${e} is not defined in SlotToggler`);if(e!=this.activeSlotName)for(let t=0;t<this.slotNames.length;t++)this.slotNames[t]==e?(this.component.slotManager.mountChildren(e),this.activeSlotName=e):this.component.slotManager.unmountChildren(this.slotNames[t])}};globalThis.ui_auto_inject_core_styles!==!1&&g(globalThis.document||null);export{v as Component,O as DOMReady,C as SlotToggler,E as Toggler,W as copyToClipboard,T as escapeHtml,K as fadeIn,Y as fadeOut,X as formatBytes,N as formatDate,J as formatDateTime,G as getDefaultLanguage,j as hideElements,g as injectCoreStyles,q as isDarkMode,H as removeSpinnerFromButton,B as scrollToBottom,I as scrollToTop,P as showElements,U as showSpinnerInButton,F as ui_button_status_waiting_off,k as ui_button_status_waiting_off_html,L as ui_button_status_waiting_on,Q as unixtime};
