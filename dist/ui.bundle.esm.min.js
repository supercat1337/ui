function S(){let s=`
.d-none {
    display: none !important;
}

html-fragment {
    display: contents;
}
`,t=new CSSStyleSheet;t.replaceSync(s),document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}function _(s){document.readyState==="interactive"||document.readyState==="complete"?s():document.addEventListener("DOMContentLoaded",s)}function T(s){return s.replace(/[&<"']/g,t=>({"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"})[t])}function L(s,t){s.disabled=!0,s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+T(t)}function D(s,t){s.disabled=!1,s.innerText=t}function O(s,t){s.disabled=!1,s.innerHTML=t}function F(s){s.scrollTop=0}function k(s){s.scrollTop=s.scrollHeight}function B(...s){for(let t=0;t<s.length;t++)s[t].classList.add("d-none")}function I(...s){for(let t=0;t<s.length;t++)s[t].classList.remove("d-none")}function j(s,t=null){if(s.getElementsByClassName("spinner-border")[0])return;let e=document.createElement("span");t?e.className=t:e.className="spinner-border spinner-border-sm",s.prepend(e)}function H(s){let t=s.querySelector(".spinner-border");t&&t.remove()}function U(){return Math.floor(new Date().getTime()/1e3)}function P(){return!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)}function q(){let s=navigator.language.match(/^[a-z]+/);return s?s[0]:"en"}function G(s,t=2,e,n){e=e||"en",n=n||{en:["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"]};let i=n[e]?n[e]:n.en;if(s===0)return"0 "+i[0];let r=s<0?"-":"";s=Math.abs(s);let o=1024,a=t<0?0:t,f=Math.floor(Math.log(s)/Math.log(o));return r+parseFloat((s/Math.pow(o,f)).toFixed(a))+" "+i[f]}function X(s){return navigator.clipboard.writeText(s)}function W(s){var t=new Date(s*1e3);return`${t.toLocaleDateString("en-GB")} ${t.toLocaleTimeString("en-GB")}`}function K(s){var t=new Date(s*1e3);return`${t.toLocaleDateString("en-GB")}`}var C=class{items=new Map;#t;addItem(t,e,n){if(this.items.has(t))throw new Error("Item already exists");this.items.set(t,{isActive:!1,on:e,off:n})}removeItem(t){this.#t===t&&(this.#t=""),this.items.delete(t)}setActive(t){if(!this.items.has(t))throw new Error("Item not found");if(this.#t!==t)for(let[e,n]of this.items)e===t?(this.#t=e,n.isActive||(n.isActive=!0,n.on(e))):(n.isActive&&n.off(e),n.isActive=!1)}runCallbacks(){for(let[t,e]of this.items)e.isActive?e.on(t):e.off(t)}};function Y(s,t=400){s.style.opacity="0",s.style.display="block";let e=+new Date,n=()=>{let i=+new Date;s.style.opacity=String(+s.style.opacity+(i-e)/t),e=+new Date,+s.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}function Z(s,t=400){s.style.opacity="1";let e=+new Date,n=()=>{let i=+new Date;s.style.opacity=String(+s.style.opacity-(i-e)/t),e=+new Date,+s.style.opacity>0&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}var b="scope-ref";function v(s,t){var e;return t.is_scope_element?e=t.is_scope_element(s,t):e=s.getAttribute(b),e===null?!1:e}function $(s){let t={ref_attr_name:"ref",window:globalThis.window,is_scope_element:void 0,include_root:!1},e=Object.assign({},t,s);if(!e.window)throw new Error("settings.window is not defined");return e}function w(s,t,e={}){var n={},i={},r=[],o=$(e);function a(l){var h=l.getAttribute(o.ref_attr_name);if(h!=null&&h!=""&&(n[h]?globalThis.window?console.warn(`Element has reference #${h} which is already used
`,`
element: `,l,`
reference #${h}: `,n[h],`
scope root: `,s):console.warn(`Element has reference #${h} which is already used
`):n[h]=l),l!=s){var c=v(l,o);if(typeof c!="string")return;c!=""?i[c]?(globalThis.window?console.warn(`scope #${c} is already used`,l):console.warn(`scope #${c} is already used`),r.push(l)):i[c]=l:r.push(l)}t&&t(l)}o.include_root===!0&&s instanceof o.window.HTMLElement&&(n.root=s,t&&t(s)),x(s,a,o);var f=0;return r.forEach(l=>{for(;i["$"+f.toString()];)f++;i["$"+f.toString()]=l}),{refs:n,scope_refs:i}}function x(s,t,e){var n=$(e);function i(a){var f=a,l=f.parentElement;return l&&l!=s&&v(l,n)!==!1?2:1}let r=n.window.document.createTreeWalker(s,1,i);var o;for(n.include_root===!0&&s instanceof n.window.HTMLElement&&t(s);o=r.nextNode();)t(o)}function g(s,t){for(let e in t){let n=s[e];if(!n)throw new Error(`Missing ref: ${e}`);let i=typeof t[e]=="function"?t[e].prototype:t[e];if(i.isPrototypeOf(n)===!1)throw new Error(`The ref "${e}" must be an instance of ${i.constructor.name} (actual: ${n.constructor.name})`)}}function d(s,t){if(typeof s!="string")throw new Error("html must be a string");let e=t?.window||globalThis.window;if(!e)throw new Error("window is not defined");let i=e.document.createElement("template");return i.innerHTML=s,i.content}var p=class{#t=new Set;#e=new Map;#n=new Set;#s;#i=!1;constructor(t){this.#s=t}setSlotStrictMode(t){this.#i=t}defineSlots(...t){let e=new Set(t);for(let n of this.#t)e.has(n)||this.removeSlot(n);for(let n of e)this.addSlot(n)}addSlot(t){this.#e.has(t)||this.#e.set(t,new Set),this.#t.add(t)}removeSlot(t){if(!this.#t.has(t))return;let e=this.#e.get(t);e&&(e.forEach(n=>{this.#s.removeChildComponent(n),n.unmount(),this.#n.delete(n)}),this.#e.delete(t)),this.#t.delete(t)}get slotNames(){return Array.from(this.#t)}slotExists(t){return this.#t.has(t)}addComponentsToSlot(t,...e){if(!this.slotExists(t)){if(this.#i)throw new Error(`Slot "${t}" does not exist`);console.warn(`Warning: Slot "${t}" does not exist in component "${this.#s.constructor.name}". It will be created automatically.`)}let n=this.#e.get(t);n||(n=new Set,this.#e.set(t,n));for(let i=0;i<e.length;i++)this.#n.add(e[i]),n.add(e[i])}removeChildComponent(t){this.#n.delete(t);for(let[e,n]of this.#e)if(n.has(t)){n.delete(t);break}}get children(){return this.#n}mountChildren(t){if(this.#s.isConnected!==!0)return;let e=t?[t]:Array.from(this.#t);if(e.some(i=>!this.#s.$internals.slotRefs[i])){if(this.#i)throw new Error(`One or more slot names do not exist in component "${this.#s.constructor.name}"`);if(this.#s.updateRefs(),e.some(r=>!this.#s.$internals.slotRefs[r])){console.warn(`One or more slot names do not exist in component "${this.#s.constructor.name}"`);return}}for(let i of e){let r=this.#e.get(i),o=this.#s.$internals.slotRefs[i];if(!(!r||!o))for(let a of r)a.isCollapsed||a.mount(o,"append")}}unmountChildren(t){let e=t?[t]:Array.from(this.#t);for(let n=0;n<e.length;n++){let i=Array.from(this.#e.get(e[n])||[]);for(let r=0;r<i.length;r++)i[r].unmount()}}};var u=class{events={};on(t,e){typeof this.events[t]!="object"&&(this.events[t]=[]),this.events[t].push(e);let n=this,i=function(){n.removeListener(t,e)};return!/^(#has-listeners|#no-listeners)$/.test(t)&&this.events[t].length==1&&this.emit("#has-listeners",t),i}removeListener(t,e){var n;typeof this.events[t]=="object"&&(n=this.events[t].indexOf(e),n>-1&&(this.events[t].splice(n,1),!/^(#has-listeners|#no-listeners)$/.test(t)&&this.events[t].length==0&&this.emit("#no-listeners",t)))}emit(t){if(typeof this.events[t]=="object"){var e,n,i,r=[].slice.call(arguments,1);for(n=this.events[t].slice(),i=n.length,e=0;e<i;e++)try{n[e].apply(this,r)}catch(o){console.error(t,r),console.error(o)}}}once(t,e){return this.on(t,function n(){this.removeListener(t,n),e.apply(this,arguments)})}waitForEvent(t,e=0){return new Promise(n=>{let i,r=this.on(t,()=>{e>0&&clearTimeout(i),r(),n(!0)});e>0&&(i=setTimeout(()=>{r(),n(!1)},e))})}waitForAnyEvent(t,e=0){return new Promise(n=>{let i,r=[],o=()=>{e>0&&clearTimeout(i),r.forEach(a=>{a()}),n(!0)};t.forEach(a=>{r.push(this.on(a,o))}),e>0&&(i=setTimeout(()=>{o(),n(!1)},e))})}clear(){this.events={}}destroy(){this.clear()}clearEventListeners(t){(this.events[t]||[]).length>0&&(this.events[t]=[],this.emit("#no-listeners",t))}onHasEventListeners(t){return this.on("#has-listeners",t)}onNoEventListeners(t){return this.on("#no-listeners",t)}};var m=class{constructor(){this.eventEmitter=new u,this.disconnectController=new AbortController,this.root=null,this.textUpdateFunction=null,this.textResources={},this.refs={},this.slotRefs={},this.parentComponent=null,this.parentSlotName=""}};function M(s){s.reloadText();try{s.connectedCallback()}catch(t){console.error("Error in connectedCallback:",t)}}function A(s){try{s.disconnectedCallback()}catch(t){console.error("Error in disconnectedCallback:",t)}}var y=class s{$internals=new m;#t=void 0;layout;slots;refsAnnotation;#e=null;#n=!1;slotManager=new p(this);isCollapsed=!1;constructor(){this.onConnect(M),this.onDisconnect(A)}reloadText(){this.$internals.textUpdateFunction&&this.$internals.textUpdateFunction(this)}setTextUpdateFunction(t){this.$internals.textUpdateFunction=t}#s(){this.layout&&(this.#t=this.layout,this.layout=void 0);let t=this.#t||void 0;if(t==null)return;let e;if(typeof t=="function"){let i=t(this);i instanceof Node?e=i:e=d(i)}else e=d(t);let n=0;for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===1&&n++;if(n!==1)throw new Error("Layout must have exactly one root element");this.#e=e}setLayout(t,e){this.#t=t,this.#e=null,e&&(this.refsAnnotation=e)}getRefs(){if(!this.#n)throw new Error("Component is not connected to the DOM");return this.$internals.refs}getRef(t){let e=this.getRefs();if(!(t in e))throw new Error(`Ref "${t}" does not exist`);return e[t]}hasRef(t){let e=this.getRefs();return t in e}updateRefs(){if(!this.$internals.root)throw new Error("Component is not connected to the DOM");let t=this.$internals.root,{refs:e,scope_refs:n}=w(t);this.refsAnnotation&&g(e,this.refsAnnotation);for(let i in n)this.slotManager.addSlot(i);this.$internals.refs=e,this.$internals.slotRefs=n}on(t,e){return this.$internals.eventEmitter.on(t,e)}emit(t,...e){return this.$internals.eventEmitter.emit(t,this,...e)}onBeforeConnect(t){return this.on("beforeConnect",t)}onConnect(t){return this.on("connect",t)}onDisconnect(t){return this.on("disconnect",t)}onMount(t){return this.on("mount",t)}onBeforeUnmount(t){return this.on("beforeUnmount",t)}onUnmount(t){return this.on("unmount",t)}get isConnected(){return this.#n}connect(t){if(this.#n===!0)throw new Error("Component is already connected");this.$internals.root=t,this.updateRefs(),this.$internals.disconnectController=new AbortController,this.#n=!0,this.slotManager.mountChildren(),this.emit("connect")}disconnect(){this.#n!==!1&&(this.#n=!1,this.$internals.disconnectController.abort(),this.$internals.refs={},this.$internals.slotRefs={},this.emit("disconnect"))}connectedCallback(){}disconnectedCallback(){}mount(t,e="replace"){if(!(t instanceof Element))throw new TypeError("Container must be a DOM Element");let n=["replace","append","prepend"];if(!n.includes(e))throw new Error(`Invalid mode: ${e}. Must be one of: ${n.join(", ")}`);if(this.#e===null&&this.#s(),this.#e===null)throw new Error("Template is not set");if(this.#n===!0)return;let i=this.#e.cloneNode(!0);this.emit("beforeConnect",i);let r=i.firstElementChild;e==="replace"?t.replaceChildren(i):e==="append"?t.append(i):e==="prepend"&&t.prepend(i),this.connect(r),this.emit("mount")}unmount(){this.#n!==!1&&(this.emit("beforeUnmount"),this.slotManager.unmountChildren(),this.disconnect(),this.$internals.root?.remove(),this.emit("unmount"))}collapse(){this.unmount(),this.isCollapsed=!0}expand(){this.isCollapsed=!1,this.#n!==!0&&this.$internals.parentComponent!==null&&this.$internals.parentComponent.addComponentToSlot(this.$internals.parentSlotName,this)}show(){this.isConnected&&this.$internals.root?.classList.remove("d-none")}hide(){this.isConnected&&this.$internals.root?.classList.add("d-none")}$on(t,e,n){return t.addEventListener(e,n,{signal:this.$internals.disconnectController.signal}),()=>t.removeEventListener(e,n)}getSlotNames(){return this.slotManager.slotNames}defineSlots(...t){this.slotManager.defineSlots(...t)}addComponentToSlot(t,...e){if(!e.every(n=>n instanceof s))throw new Error("All components must be instances of Component");typeof this.slots<"u"&&this.defineSlots(...this.slots),this.slotManager.addComponentsToSlot(t,...e);for(let n=0;n<e.length;n++)e[n].$internals.parentComponent=this,e[n].$internals.parentSlotName=t;this.#n&&this.slotManager.mountChildren(t)}removeChildComponent(t){t.$internals.parentComponent===this&&(t.$internals.parentComponent=null,t.$internals.parentSlotName="",this.slotManager.removeChildComponent(t))}};var E=class{constructor(t,e,n){typeof t.slots<"u"&&(t.defineSlots(...t.slots),t.slots=void 0);for(let i=0;i<e.length;i++)if(t.slotManager.slotExists(e[i])===!1)throw new Error(`Slot ${e[i]} does not exist in component`);if(t.slotManager.slotExists(n)===!1)throw new Error(`Slot ${n} does not exist in component`);this.component=t,this.slotNames=e,this.activeSlotName=n}toggle(t){if(this.slotNames.indexOf(t)===-1)throw new Error(`Slot ${t} is not defined in SlotToggler`);if(t!=this.activeSlotName)for(let e=0;e<this.slotNames.length;e++)this.slotNames[e]==t?(this.component.slotManager.mountChildren(t),this.activeSlotName=t):this.component.slotManager.unmountChildren(this.slotNames[e])}};S();export{y as Component,_ as DOMReady,E as SlotToggler,C as Toggler,X as copyToClipboard,T as escapeHtml,Y as fadeIn,Z as fadeOut,G as formatBytes,K as formatDate,W as formatDateTime,q as getDefaultLanguage,B as hideElements,P as isDarkMode,H as removeSpinnerFromButton,k as scrollToBottom,F as scrollToTop,I as showElements,j as showSpinnerInButton,D as ui_button_status_waiting_off,O as ui_button_status_waiting_off_html,L as ui_button_status_waiting_on,U as unixtime};
